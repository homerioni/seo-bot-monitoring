import React from 'react';
import s from './ThreadInfo.module.scss';
import SwitchBtn from "../../../../../../UI/StatusUI/SwitchBtn/SwitchBtn";
import {PMService} from "../../../../../../../API/PMService";
import {useQueryClient} from "react-query";
import {getErrorMessage} from "../../../../../../../utils/tools";

const ThreadInfo = ({data, setModalConfirm}) => {
    const queryClient = useQueryClient();

    const switchBtnHandle = () => {
        const textState = data.isActive ? 'Выключить' : 'Включить';
        setModalConfirm({
            isOpen: true,
            data: {
                title: `${textState} отправку по настройке <b>${data.name}?</b>`,
                color: data.isActive ? 'red' : 'green',
                btnText: `Да, ${textState}`,
                iconType: 'server',
                onConfirm: (close) => {
                    PMService.settings.change(data.id, {...data, isActive: !data.isActive}).then(() => {
                        queryClient.invalidateQueries([`threads${data.server.id}`]);
                        close([{status: true, message: `Отправка по настройке ${data.name} успешно ${data.isActive ? 'выключена' : 'включена'}`}]);
                    }).catch(e => close(getErrorMessage(e)));
                },
            }
        })
    }

    return (
        <div className={s.main}>
            <p className={`${s.item}`}>
                {data.isSendingCopies ?
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.5273 3.6674L10.1323 1.7099C9.48727 1.4249 8.51227 1.4249 7.86727 1.7099L3.47227 3.6674C2.36227 4.1624 2.19727 4.8374 2.19727 5.1974C2.19727 5.5574 2.36227 6.23241 3.47227 6.72741L7.86727 8.68491C8.18977 8.8274 8.59477 8.9024 8.99977 8.9024C9.40477 8.9024 9.80977 8.8274 10.1323 8.68491L14.5273 6.72741C15.6373 6.23241 15.8023 5.5574 15.8023 5.1974C15.8023 4.8374 15.6448 4.1624 14.5273 3.6674Z" fill="#A1B1C5"/>
                        <path d="M8.1474 12.6531L8.1474 12.6531L8.14804 12.6534C8.41659 12.7685 8.70828 12.8299 9.00023 12.8299C9.2921 12.8299 9.58398 12.7685 9.84542 12.6532L9.84557 12.6531L14.9006 10.4031L14.9006 10.4031C15.2973 10.2259 15.6474 9.89989 15.8981 9.51275C16.1489 9.12562 16.3027 8.67382 16.3027 8.24244C16.3027 7.90732 16.0328 7.63744 15.6977 7.63744C15.3626 7.63744 15.0927 7.90732 15.0927 8.24244C15.0927 8.43626 15.0129 8.65937 14.8852 8.85547C14.7575 9.05158 14.5862 9.21421 14.4101 9.29167L14.4099 9.29176L9.35519 11.5416C9.35515 11.5416 9.35511 11.5417 9.35507 11.5417C9.12791 11.641 8.86505 11.641 8.6379 11.5417C8.63786 11.5417 8.63782 11.5416 8.63778 11.5416L3.58307 9.29176L3.58287 9.29167C3.40699 9.21429 3.23563 9.04994 3.10782 8.85274C2.98001 8.65555 2.90023 8.43243 2.90023 8.24244C2.90023 7.90732 2.63035 7.63744 2.29523 7.63744C1.96012 7.63744 1.69023 7.90732 1.69023 8.24244C1.69023 8.67753 1.84403 9.12934 2.09486 9.51561C2.3457 9.90188 2.69578 10.226 3.09235 10.4031L3.0924 10.4031L8.1474 12.6531Z" fill="#A1B1C5" stroke="#A1B1C5" strokeWidth="0.1"/>
                        <path d="M8.1474 16.3731L8.1474 16.3731L8.14804 16.3734C8.41659 16.4885 8.70828 16.5499 9.00023 16.5499C9.2921 16.5499 9.58398 16.4885 9.84542 16.3732L9.84557 16.3731L14.9006 14.1231L14.9008 14.123C15.751 13.74 16.3027 12.8973 16.3027 11.9624C16.3027 11.6273 16.0328 11.3574 15.6977 11.3574C15.3626 11.3574 15.0927 11.6273 15.0927 11.9624C15.0927 12.4151 14.8194 12.8321 14.4102 13.0116L14.4099 13.0117L9.35519 15.2616C9.35515 15.2616 9.35511 15.2616 9.35507 15.2617C9.12791 15.361 8.86505 15.361 8.6379 15.2617C8.63786 15.2616 8.63782 15.2616 8.63778 15.2616L3.58319 13.0118C3.58316 13.0118 3.58312 13.0118 3.58309 13.0117C3.16599 12.8247 2.90023 12.415 2.90023 11.9624C2.90023 11.6273 2.63035 11.3574 2.29523 11.3574C1.96012 11.3574 1.69023 11.6273 1.69023 11.9624C1.69023 12.897 2.24174 13.7475 3.09246 14.1231C3.09249 14.1231 3.09251 14.1231 3.09254 14.1232L8.1474 16.3731Z" fill="#A1B1C5" stroke="#A1B1C5" strokeWidth="0.1"/>
                    </svg>
                    :
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.81608 5.13332H2.6987C1.92232 5.13332 1.28711 4.55584 1.28711 3.85003V2.56674C1.28711 1.86093 1.92232 1.28345 2.6987 1.28345H4.81608C5.59245 1.28345 6.22767 1.86093 6.22767 2.56674V3.85003C6.22767 4.55584 5.59245 5.13332 4.81608 5.13332Z" fill="#A1B1C5"/>
                        <path d="M14.5577 4.49182H12.0169C11.5511 4.49182 11.1699 4.14533 11.1699 3.72184V2.69521C11.1699 2.27172 11.5511 1.92523 12.0169 1.92523H14.5577C15.0236 1.92523 15.4047 2.27172 15.4047 2.69521V3.72184C15.4047 4.14533 15.0236 4.49182 14.5577 4.49182Z" fill="#A1B1C5"/>
                        <path d="M14.5577 9.30395H12.0169C11.5511 9.30395 11.1699 8.95746 11.1699 8.53397V7.50734C11.1699 7.08385 11.5511 6.73737 12.0169 6.73737H14.5577C15.0236 6.73737 15.4047 7.08385 15.4047 7.50734V8.53397C15.4047 8.95746 15.0236 9.30395 14.5577 9.30395Z" fill="#A1B1C5"/>
                        <path opacity="0.96" d="M11.1662 8.5018C11.4556 8.5018 11.6955 8.28364 11.6955 8.02057C11.6955 7.75749 11.4556 7.53933 11.1662 7.53933H9.22526V3.68946H11.1662C11.4556 3.68946 11.6955 3.4713 11.6955 3.20822C11.6955 2.94515 11.4556 2.72699 11.1662 2.72699H6.22563C5.93626 2.72699 5.69629 2.94515 5.69629 3.20822C5.69629 3.4713 5.93626 3.68946 6.22563 3.68946H8.16657V11.5496C8.16657 12.5249 9.03469 13.3141 10.1075 13.3141H11.1662C11.4556 13.3141 11.6955 13.096 11.6955 12.8329C11.6955 12.5698 11.4556 12.3517 11.1662 12.3517H10.1075C9.6205 12.3517 9.22526 11.9924 9.22526 11.5496V8.5018H11.1662Z" fill="#A1B1C5"/>
                        <path d="M14.5577 14.1163H12.0169C11.5511 14.1163 11.1699 13.7698 11.1699 13.3464V12.3197C11.1699 11.8962 11.5511 11.5497 12.0169 11.5497H14.5577C15.0236 11.5497 15.4047 11.8962 15.4047 12.3197V13.3464C15.4047 13.7698 15.0236 14.1163 14.5577 14.1163Z" fill="#A1B1C5"/>
                    </svg>
                }
                <span>{data.isSendingCopies ? 'Копирование' : 'Распределение'}</span>
            </p>
            <p className={`${s.item}`}>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16.6338 7.46656C16.0754 6.8499 15.2338 6.49156 14.0671 6.36656V5.73323C14.0671 4.59156 13.5838 3.49156 12.7338 2.7249C11.8754 1.94156 10.7588 1.5749 9.60044 1.68323C7.60877 1.8749 5.93377 3.7999 5.93377 5.88323V6.36656C4.76711 6.49156 3.92544 6.8499 3.36711 7.46656C2.55877 8.36656 2.58377 9.56656 2.67544 10.3999L3.25877 15.0416C3.43377 16.6666 4.09211 18.3332 7.67544 18.3332H12.3254C15.9088 18.3332 16.5671 16.6666 16.7421 15.0499L17.3254 10.3916C17.4171 9.56656 17.4421 8.36656 16.6338 7.46656ZM9.7171 2.84156C10.5504 2.76656 11.3421 3.0249 11.9588 3.58323C12.5671 4.13323 12.9088 4.91656 12.9088 5.73323V6.31656H7.09211V5.88323C7.09211 4.3999 8.31711 2.9749 9.7171 2.84156ZM10.0004 16.4356C7.73015 16.4356 5.88972 14.5952 5.88972 12.3249C5.88972 10.0546 7.73015 8.21418 10.0004 8.21418C12.2707 8.21418 14.1112 10.0546 14.1112 12.3249C14.1112 14.5952 12.2707 16.4356 10.0004 16.4356Z" fill="#A1B1C5"/>
                    <path d="M8.87188 14.2857C8.61176 14.2857 8.35164 14.1536 8.20597 13.9199C7.98747 13.5644 8.10192 13.0869 8.4765 12.8736L9.40253 12.3352V11.238C9.40253 10.8215 9.75629 10.4761 10.1829 10.4761C10.6095 10.4761 10.9528 10.8114 10.9528 11.238V12.7618C10.9528 13.026 10.8072 13.2799 10.5783 13.412L9.27767 14.1739C9.15281 14.245 9.00714 14.2857 8.87188 14.2857Z" fill="#A1B1C5"/>
                </svg>
                <span>{data.sendingPeriod}</span>
            </p>
            <p className={`${s.item} ${s.folder}`}>
                <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.864 10.5887L18.7207 10.3916C18.4699 10.087 18.1742 9.84512 17.8338 9.66596C17.3769 9.40616 16.8574 9.27179 16.3199 9.27179H5.16673C4.62923 9.27179 4.11861 9.40616 3.65278 9.66596C3.3034 9.85408 2.98986 10.1139 2.73007 10.4364C2.21944 11.0903 1.97757 11.8966 2.05819 12.7028L2.38965 16.8864C2.50611 18.1495 2.6584 19.7082 5.49819 19.7082H15.9974C18.8372 19.7082 18.9805 18.1495 19.1059 16.8774L19.4374 12.7118C19.518 11.9593 19.3209 11.2068 18.864 10.5887Z" fill="#FFB74B"/>
                    <path d="M7.92311 14.3105C7.7022 14.3087 7.5217 14.4864 7.51993 14.7073C7.51817 14.9282 7.69583 15.1087 7.91673 15.1105L7.92311 14.3105ZM13.7698 15.04C13.9273 14.885 13.9293 14.6317 13.7743 14.4743L11.2491 11.9085C11.0941 11.751 10.8409 11.749 10.6834 11.904C10.526 12.0589 10.524 12.3122 10.6789 12.4697L12.9236 14.7504L10.6429 16.995C10.4854 17.15 10.4834 17.4032 10.6384 17.5607C10.7933 17.7181 11.0466 17.7201 11.204 17.5652L13.7698 15.04ZM7.91673 15.1105L13.4861 15.1549L13.4924 14.3549L7.92311 14.3105L7.91673 15.1105Z" fill="white"/>
                    <path d="M18.4093 7.61011C18.4514 7.9925 18.0351 8.25087 17.6678 8.13641C17.2414 8.0035 16.7942 7.93704 16.3305 7.93704H5.16839C4.6998 7.93704 4.23799 8.00829 3.80385 8.14451C3.4411 8.25833 3.02734 8.00961 3.02734 7.62943V5.96621C3.02734 2.76808 4.0038 1.79163 7.20193 1.79163H8.25901C9.54005 1.79163 9.94318 2.20371 10.4628 2.87558L11.5378 4.30892C11.7617 4.6135 11.7707 4.63142 12.1648 4.63142H14.2969C17.0601 4.63142 18.162 5.36182 18.4093 7.61011Z" fill="#FFB74B"/>
                </svg>
                <span>{data.folderForReading}</span>
            </p>
            <SwitchBtn active={data.isActive} onClick={switchBtnHandle}/>
        </div>
    );
};

export default ThreadInfo;