import React, {useRef} from 'react';
import s from './DotBtnList.module.scss';
import {useToggleDropDownList} from "../../../hooks/useToggleDropDownList";

const DotBtnList = ({className, onEdit, onDel, onReset, onSocket, onTurn, handleToggle}) => {
    const listRef = useRef(null);
    const [isListOpen, setIsListOpen, isClosing] =
        useToggleDropDownList(listRef, 280, null, state => handleToggle && handleToggle(state));

    const onClickFunc = (func) => e => {
        e.stopPropagation();
        setIsListOpen(false);
        func();
    };

    const handleListOpen = e => {
        e.stopPropagation();
        setIsListOpen(!isListOpen);
    };

    return (
        <div className={`${className ?? ''} ${s.btnBox} ${isListOpen ? s.active : ''} ${isClosing ? s.close : ''}`} ref={listRef}>
            <button type="button" className={s.btnListOpen} onClick={handleListOpen}>
                <svg width="4" height="15" viewBox="0 0 4 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="2.01432" cy="1.84635" r="1.54167" fill="#8B98EE"/>
                    <circle cx="2.01432" cy="7.38151" r="1.54167" fill="#8B98EE"/>
                    <circle cx="2.01432" cy="12.9167" r="1.54167" fill="#8B98EE"/>
                </svg>
            </button>
            {isListOpen &&
                <div className={`${s.btnList}`}>
                    {onEdit &&
                        <button type="button" className={s.listItemBtn} onClick={onClickFunc(onEdit)}>
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.08876 1.00474L0.866469 7.22594C0.626689 7.46568 0.398907 7.93317 0.350951 8.2688L0.015261 10.6422C-0.104629 11.5053 0.494815 12.1046 1.35802 11.9847L3.73182 11.6491C4.06751 11.6012 4.53511 11.3734 4.77489 11.1337L10.9972 4.91247C12.0642 3.84563 12.5797 2.599 10.9972 1.01673C9.41463 -0.577532 8.16777 -0.07408 7.08876 1.00474Z" fill="#8B98EE"/>
                                <path d="M6 2.25C6.50769 4.06154 7.92692 5.49231 9.75 6" stroke="white" strokeWidth="1.5" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>
                            </svg>
                        </button>}
                    {onDel &&
                        <button type="button" className={s.listItemBtn} onClick={onClickFunc(onDel)}>
                            <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.5491 2.65333C11.4757 2.54667 10.4024 2.46667 9.32238 2.40667V2.4L9.17572 1.53333C9.07572 0.92 8.92905 0 7.36905 0H5.62238C4.06905 0 3.92238 0.88 3.81572 1.52667L3.67572 2.38C3.05572 2.42 2.43572 2.46 1.81572 2.52L0.455717 2.65333C0.175717 2.68 -0.024283 2.92667 0.00238368 3.2C0.0290503 3.47333 0.26905 3.67333 0.54905 3.64667L1.90905 3.51333C5.40238 3.16667 8.92238 3.3 12.4557 3.65333C12.4757 3.65333 12.489 3.65333 12.5091 3.65333C12.7624 3.65333 12.9824 3.46 13.0091 3.2C13.029 2.92667 12.8291 2.68 12.5491 2.65333Z" fill="#EB376D"/>
                                <path d="M11.3231 4.59203C11.1631 4.42536 10.9431 4.33203 10.7164 4.33203H2.28975C2.06309 4.33203 1.83642 4.42536 1.68309 4.59203C1.52975 4.7587 1.44309 4.98536 1.45642 5.2187L1.86976 12.0587C1.94309 13.072 2.03642 14.3387 4.36309 14.3387H8.64309C10.9698 14.3387 11.0631 13.0787 11.1364 12.0587L11.5498 5.22536C11.5631 4.98536 11.4764 4.7587 11.3231 4.59203ZM7.60975 10.9987H5.38976C5.11642 10.9987 4.88976 10.772 4.88976 10.4987C4.88976 10.2254 5.11642 9.9987 5.38976 9.9987H7.60975C7.88309 9.9987 8.10975 10.2254 8.10975 10.4987C8.10975 10.772 7.88309 10.9987 7.60975 10.9987ZM8.16975 8.33203H4.83642C4.56309 8.33203 4.33642 8.10536 4.33642 7.83203C4.33642 7.5587 4.56309 7.33203 4.83642 7.33203H8.16975C8.44309 7.33203 8.66975 7.5587 8.66975 7.83203C8.66975 8.10536 8.44309 8.33203 8.16975 8.33203Z" fill="#EB376D"/>
                            </svg>
                        </button>}
                    {onSocket &&
                        <button type="button" className={s.listItemBtn} style={{cursor: 'not-allowed'}} onClick={onClickFunc(onSocket)}>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path fillRule="evenodd" clipRule="evenodd" d="M6.21942 0.0627702C6.14891 0.0987467 6.05223 0.182848 6.00457 0.249645C5.91891 0.369723 5.91781 0.389528 5.90692 1.98058L5.89594 3.59004L4.91082 3.60168C3.46988 3.61871 3.55465 3.50933 3.55465 5.3516C3.55465 6.78562 3.56133 6.82996 3.8036 7.00277C3.90672 7.07632 3.98766 7.09195 4.32344 7.10312L4.72113 7.11636L4.73668 8.95859C4.75207 10.7789 4.75344 10.8057 4.8527 11.211C5.09399 12.1962 5.5141 12.9634 6.20598 13.6822C6.77844 14.2768 7.3618 14.6687 8.10543 14.9582C8.4816 15.1046 9.15074 15.2735 9.35477 15.2735C9.43379 15.2735 9.45309 15.2928 9.45309 15.3718C9.45309 15.5758 9.62196 16.245 9.76836 16.6211C10.0624 17.3766 10.4559 17.9576 11.0727 18.5473C11.9816 19.4162 13.1195 19.9147 14.3573 19.9862C14.7238 20.0074 14.8109 20.0007 14.9343 19.9422C15.3316 19.7536 15.3845 19.1914 15.0288 18.938C14.9359 18.8719 14.8201 18.8467 14.4802 18.8187C13.1662 18.7105 12.0692 18.1053 11.3466 17.0899C11.0257 16.6389 10.7486 15.9782 10.6493 15.4276L10.6243 15.2887L10.9732 15.2219C11.991 15.0268 12.8677 14.5739 13.62 13.8548C14.4168 13.093 14.8949 12.2513 15.1662 11.1328C15.2402 10.8275 15.248 10.6531 15.2627 8.95859L15.2788 7.11636L15.6765 7.10312C16.0123 7.09195 16.0932 7.07632 16.1963 7.00277C16.4386 6.82996 16.4453 6.78562 16.4453 5.3516C16.4453 3.91757 16.4386 3.87324 16.1963 3.70043C16.0789 3.61668 16.036 3.61285 15.0879 3.60168L14.1015 3.59004V2.02554C14.1015 0.296403 14.0998 0.283044 13.8526 0.106676C13.6821 -0.0148861 13.3491 -0.0148861 13.1786 0.106676C12.9314 0.283044 12.9297 0.296208 12.9297 2.02742V3.59379H9.99996H7.07028V2.02742C7.07028 0.300817 7.06793 0.282458 6.8261 0.110231C6.67082 -0.000315758 6.38668 -0.0225423 6.21942 0.0627702ZM9.74282 7.17062C9.67657 7.20332 9.33891 7.51539 8.9925 7.8641C8.21828 8.64347 8.15078 8.77105 8.32371 9.12828C8.40266 9.29132 8.43324 9.31082 9.27098 9.73136C9.74711 9.97039 10.1441 10.1727 10.1532 10.1809C10.1623 10.1892 10.018 10.351 9.8325 10.5406C9.48715 10.8936 9.41403 11.0114 9.41403 11.2155C9.41403 11.4577 9.65125 11.7328 9.90039 11.7796C10.1784 11.8318 10.2547 11.7823 10.9448 11.1027C11.7711 10.2889 11.8523 10.1418 11.6762 9.77804C11.5973 9.615 11.5667 9.5955 10.7289 9.17496C10.2528 8.93593 9.85613 8.73394 9.84746 8.72613C9.83875 8.71832 9.9841 8.55379 10.1705 8.36047C10.3568 8.16718 10.5265 7.96367 10.5476 7.90824C10.6457 7.65007 10.5414 7.37675 10.2764 7.19824C10.1231 7.09488 9.91782 7.08425 9.74282 7.17062Z" fill="#FE6E1E"/>
                            </svg>
                        </button>}
                    {onTurn &&
                        <button type="button" className={s.listItemBtn} onClick={onClickFunc(onTurn)}>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" viewBox="0 0 16 18" fill="none">
                                <path d="M12.3997 5.18091C13.2703 6.05179 13.8631 7.16126 14.1032 8.36904C14.3433 9.57682 14.2198 10.8287 13.7485 11.9663C13.2772 13.1039 12.4791 14.0763 11.4552 14.7604C10.4313 15.4445 9.22751 15.8096 7.9961 15.8096C6.76468 15.8096 5.56092 15.4445 4.53701 14.7604C3.51311 14.0763 2.71503 13.1039 2.2437 11.9663C1.77236 10.8287 1.64894 9.57682 1.88903 8.36904C2.12912 7.16126 2.72194 6.05179 3.59253 5.18091" stroke="#73798D" strokeWidth="2.3" strokeLinecap="round" strokeLinejoin="round"/>
                                <path d="M7.99902 1.9707V8.88911" stroke="#73798D" strokeWidth="2.3" strokeLinecap="round" strokeLinejoin="round"/>
                            </svg>
                        </button>}
                    {onReset &&
                        <button type="button" className={s.listItemBtn} onClick={onClickFunc(onReset)}>
                            <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                                <path d="M10.6997 14.9295C13.5597 14.1485 15.6663 11.4527 15.6663 8.24545C15.6663 4.42992 12.7063 1.33325 8.99967 1.33325C4.55301 1.33325 2.33301 5.17643 2.33301 5.17643M2.33301 5.17643V2.02447M2.33301 5.17643H3.67301H5.29301" stroke="#5BC2FF" strokeWidth="2.3" strokeLinecap="round" strokeLinejoin="round"/>
                                <path d="M1.5 9.28223C1.5 12.9111 4.5 15.5032 8 15.5032" stroke="#5BC2FF" strokeWidth="2.3" strokeLinecap="round" strokeLinejoin="round" strokeDasharray="3 0"/>
                            </svg>
                        </button>}
                </div>}
        </div>
    );
};

export default DotBtnList;